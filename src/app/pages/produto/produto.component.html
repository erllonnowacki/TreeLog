<div class="produto">
  <mat-grid-list
    cols="4"
    rowHeight="1:1"
    gutterSize=" 10px"
    *ngIf="produtos$ | async as produtos; else loadingError"
  >
    <mat-grid-tile class="tile-produto" *ngFor="let produto of produtos">
      <mat-card>
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title>{{produto.nome}}</mat-card-title>
          <mat-card-subtitle>{{produto.preco}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content> {{produto.descricao}} </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>
</div>

<ng-template #loadingError>
  <div *ngIf="error$ | async else loadingNoError">
    Erro ao carregar produtos
    <button (click)="onRefresh()"> Atualizar </button>
  </div>

  <ng-template #loadingNoError>
    <mat-spinner></mat-spinner>
  </ng-template>
</ng-template>
