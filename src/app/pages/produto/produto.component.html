<div class="produto">
    <button type="button" mat-fab extended (click)="novoProduto()">
        <mat-icon>add_circle_outline</mat-icon>Criar produto
    </button>
    <mat-grid-list
        cols="4"
        rowHeight="1:1"
        gutterSize=" 10px"
        *ngIf="produtos$ | async as produtos; else loadingError"
    >
        <mat-grid-tile class="tile-produto" *ngFor="let produto of produtos">
            <mat-card class="card">
                <mat-card-header>
                    <mat-card-title>{{ produto.nome }}</mat-card-title>
                    <mat-card-subtitle>{{ produto.preco }}</mat-card-subtitle>
                </mat-card-header>
                <img
                    src="../../../assets/images/img3.jpeg"
                    class="img-produto"
                />
                <mat-card-content>
                    <p>
                        {{ produto.descricao }}
                    </p>
                    <p>{{ produto.id }}</p>
                </mat-card-content>
                <mat-card-actions>
                    <button
                        mat-icon-button
                        type="button"
                        (click)="onEdit(produto.id)"
                    >
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button
                        mat-icon-button
                        type="button"
                        (click)="onDelete(produto.id)"
                    >
                        <mat-icon>delete</mat-icon>
                    </button>
                </mat-card-actions>
            </mat-card>
        </mat-grid-tile>
    </mat-grid-list>
</div>

<ng-template #loadingError>
    <div *ngIf="error$ | async; else loadingNoError">
        Erro ao carregar produtos
        <button (click)="onRefresh()">Atualizar</button>
    </div>

    <ng-template #loadingNoError>
        <mat-spinner></mat-spinner>
    </ng-template>
</ng-template>
